name: tesseract_nb
channels:
  - conda-forge
  - defaults

dependencies:
  # Python version set by CI matrix or user; default to 3.12 if not specified
  # - python=3.12  # Uncomment for local dev, CI uses python-version param

  # Build tools
  - cmake>=3.15
  - ninja
  - make
  - pkg-config

  # C++ dependencies (from wheels.yml vcpkg packages)
  - eigen>=3.3
  - boost-cpp
  - console_bridge
  - assimp
  - urdfdom
  - octomap
  - orocos-kdl
  - flann
  - jsoncpp
  - yaml-cpp
  - tinyxml2
  - bullet-cpp
  - fcl
  - ompl
  - pcl
  - ipopt
  - gtest
  - qpoases
  - taskflow
  - llvm-openmp  # OpenMP runtime (use conda's, not Homebrew's, to avoid duplicate lib crashes)
  # Note: libosqp/osqp-eigen removed - trajopt needs OSQP 0.6.x, conda has 1.0.x
  # trajopt_ext/osqp builds compatible version automatically

  # Python build dependencies
  - pip
  - numpy>=1.21.0
  - pytest>=7.0
  - pytest-benchmark
  - setuptools
  - wheel
  - scikit-build-core>=0.10
  - nanobind>=1.3.2
  - patchelf

  # Additional Python tools (via pip)
  - pip:
    - colcon-common-extensions
    - vcstool

# Notes:
# - Some packages require brew on macOS: swig, automake, autoconf, libtool
# - Install with: brew install swig automake autoconf libtool
#
# Usage:
#   conda env create -f environment.yml
#   conda activate tesseract_nb
#
# Or use mamba for faster installation:
#   mamba env create -f environment.yml
